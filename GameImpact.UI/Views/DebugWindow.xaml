<Window x:Class="GameImpact.UI.Views.DebugWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="è°ƒè¯•é¢æ¿" Height="500" Width="700"
        MinHeight="350" MinWidth="500"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="CanResizeWithGrip">

    <Border Background="{DynamicResource AppBackground}" CornerRadius="8"
            BorderBrush="{DynamicResource AppBorder}" BorderThickness="1">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="36" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- æ ‡é¢˜æ  -->
            <Border Grid.Row="0" Background="{DynamicResource AppSurface}" CornerRadius="8,8,0,0"
                    MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid>
                    <StackPanel Orientation="Horizontal" Margin="12,0,0,0" VerticalAlignment="Center">
                        <TextBlock Text="ðŸ”§" FontSize="13" VerticalAlignment="Center" />
                        <TextBlock Text="è°ƒè¯•é¢æ¿" FontSize="12" FontWeight="SemiBold"
                                   Foreground="{DynamicResource AppText}" Margin="6,0,0,0"
                                   VerticalAlignment="Center" />
                    </StackPanel>

                    <Button Style="{DynamicResource WindowCloseButton}" Click="Close_Click"
                            ToolTip="å…³é—­" HorizontalAlignment="Right" VerticalAlignment="Stretch">
                        <TextBlock Text="âœ•" FontSize="11" />
                    </Button>
                </Grid>
            </Border>

            <!-- è°ƒè¯•é¢æ¿å†…å®¹ -->
            <TabControl Grid.Row="1" Background="Transparent" BorderThickness="0" Margin="10,6,10,10">
                <TabControl.Resources>
                    <Style TargetType="TabItem">
                        <Setter Property="Background" Value="Transparent" />
                        <Setter Property="Foreground"
                                Value="{DynamicResource AppTextSecondary}" />
                        <Setter Property="Padding" Value="14,8" />
                        <Setter Property="FontSize" Value="12" />
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="TabItem">
                                    <Border x:Name="Border"
                                            Background="{TemplateBinding Background}"
                                            CornerRadius="6,6,0,0"
                                            Padding="{TemplateBinding Padding}">
                                        <ContentPresenter ContentSource="Header"
                                                          HorizontalAlignment="Center" />
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter Property="Foreground"
                                                    Value="{DynamicResource AppText}" />
                                            <Setter TargetName="Border"
                                                    Property="Background"
                                                    Value="{DynamicResource AppSurface}" />
                                        </Trigger>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="Border"
                                                    Property="Background"
                                                    Value="{DynamicResource AppSurfaceVariant}" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </TabControl.Resources>

                <!-- æ—¥å¿— Tab -->
                <TabItem Header="ðŸ“‹ æ—¥å¿—">
                    <Border Background="{DynamicResource AppSurface}" CornerRadius="0,6,6,6"
                            BorderBrush="{DynamicResource AppBorderSubtle}" BorderThickness="1">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <Border Grid.Row="0"
                                    BorderBrush="{DynamicResource AppBorderSubtle}"
                                    BorderThickness="0,0,0,1" Padding="10,6">
                                <StackPanel Orientation="Horizontal">
                                    <Button Content="æ¸…ç©º"
                                            Style="{DynamicResource SubtleButton}"
                                            Padding="10,4" FontSize="11" Click="ClearLog_Click" />
                                    <CheckBox Content="è‡ªåŠ¨æ»šåŠ¨"
                                              IsChecked="{Binding AutoScrollLog}"
                                              Margin="14,0,0,0" VerticalAlignment="Center"
                                              FontSize="11"
                                              Foreground="{DynamicResource AppTextSecondary}" />
                                </StackPanel>
                            </Border>

                            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto"
                                          Padding="10">
                                <TextBlock Text="{Binding LogText}"
                                           FontFamily="Cascadia Code,Consolas,monospace"
                                           Foreground="{DynamicResource AppTextSecondary}"
                                           FontSize="11" TextWrapping="Wrap" />
                            </ScrollViewer>
                        </Grid>
                    </Border>
                </TabItem>

                <!-- é¢„è§ˆ Tab -->
                <TabItem Header="ðŸ–¼ é¢„è§ˆ">
                    <Border Background="{DynamicResource AppSurface}" CornerRadius="0,6,6,6"
                            BorderBrush="{DynamicResource AppBorderSubtle}" BorderThickness="1">
                        <Grid Margin="14">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <StackPanel Grid.Row="0" Orientation="Horizontal"
                                        Margin="0,0,0,10">
                                <TextBlock Text="åˆ†è¾¨çŽ‡:"
                                           Foreground="{DynamicResource AppTextMuted}"
                                           VerticalAlignment="Center" Margin="0,0,6,0"
                                           FontSize="11" />
                                <TextBlock Text="{Binding PreviewResolution}"
                                           Foreground="{DynamicResource AppTextSecondary}"
                                           FontSize="11"
                                           VerticalAlignment="Center" />
                                <TextBlock Text="FPS:"
                                           Foreground="{DynamicResource AppTextMuted}"
                                           VerticalAlignment="Center" Margin="20,0,6,0"
                                           FontSize="11" />
                                <TextBlock Text="{Binding PreviewFps}"
                                           Foreground="{DynamicResource AppAccent}" FontSize="11"
                                           VerticalAlignment="Center" FontWeight="Medium" />
                            </StackPanel>

                            <Border Grid.Row="1"
                                    Background="{DynamicResource AppBackground}"
                                    CornerRadius="6" ClipToBounds="True">
                                <Image Source="{Binding PreviewSource}" Stretch="Uniform"
                                       RenderOptions.BitmapScalingMode="HighQuality" />
                            </Border>

                            <StackPanel Grid.Row="2" Orientation="Horizontal"
                                        Margin="0,10,0,0">
                                <CheckBox Content="å¯ç”¨é¢„è§ˆ" IsChecked="{Binding EnablePreview}"
                                          FontSize="11"
                                          Foreground="{DynamicResource AppTextSecondary}" />
                            </StackPanel>
                        </Grid>
                    </Border>
                </TabItem>

                <!-- åæ ‡æµ‹è¯• Tab -->
                <TabItem Header="ðŸŽ¯ åæ ‡">
                    <Border Background="{DynamicResource AppSurface}" CornerRadius="0,6,6,6"
                            BorderBrush="{DynamicResource AppBorderSubtle}" BorderThickness="1">
                        <Grid Margin="14">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <!-- åæ ‡è¾“å…¥ -->
                            <Border Grid.Row="0"
                                    Background="{DynamicResource AppSurfaceVariant}"
                                    CornerRadius="6" Padding="12" Margin="0,0,0,10">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0" Orientation="Horizontal">
                                        <TextBlock Text="X:"
                                                   Foreground="{DynamicResource AppTextMuted}"
                                                   VerticalAlignment="Center" FontSize="11" />
                                        <TextBox x:Name="MouseX" Width="60"
                                                 Margin="4,0,12,0" Text="100" FontSize="11" />
                                        <TextBlock Text="Y:"
                                                   Foreground="{DynamicResource AppTextMuted}"
                                                   VerticalAlignment="Center" FontSize="11" />
                                        <TextBox x:Name="MouseY" Width="60"
                                                 Margin="4,0,12,0" Text="100" FontSize="11" />
                                        <Button Content="ðŸŽ¯ æ‹¾å–"
                                                Style="{DynamicResource AccentButton}"
                                                Padding="12,4" FontSize="11"
                                                Click="PickCoord_Click"
                                                ToolTip="åœ¨ç›®æ ‡çª—å£ä¸Šæ‹¾å–åæ ‡" />
                                    </StackPanel>

                                    <StackPanel Grid.Column="1" Orientation="Horizontal"
                                                HorizontalAlignment="Right">
                                        <Button Content="ç‚¹å‡»"
                                                Style="{DynamicResource SubtleButton}"
                                                Padding="12,4" FontSize="11"
                                                Click="TestMouseClick_Click" />
                                        <Button Content="ç§»åŠ¨"
                                                Style="{DynamicResource SubtleButton}"
                                                Padding="12,4" FontSize="11" Margin="6,0,0,0"
                                                Click="TestMouseMove_Click" />
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <!-- OCR è¯†åˆ« -->
                            <Border Grid.Row="1"
                                    Background="{DynamicResource AppSurfaceVariant}"
                                    CornerRadius="6" Padding="12" Margin="0,0,0,10">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0" Orientation="Horizontal">
                                        <TextBlock Text="OCR" FontWeight="SemiBold"
                                                   FontSize="12"
                                                   Foreground="{DynamicResource AppText}"
                                                   VerticalAlignment="Center" />
                                    </StackPanel>

                                    <TextBox x:Name="OcrSearchText" Grid.Column="1"
                                             Margin="12,0" FontSize="11"
                                             VerticalAlignment="Center"
                                             ToolTip="è¾“å…¥è¦æŸ¥æ‰¾çš„æ–‡æœ¬ï¼Œç•™ç©ºåˆ™è¯†åˆ«å…¨å±" />

                                    <StackPanel Grid.Column="2" Orientation="Horizontal">
                                        <Button Content="æŸ¥æ‰¾"
                                                Style="{DynamicResource AccentButton}"
                                                Padding="12,4" FontSize="11"
                                                Click="TestOcrFind_Click"
                                                ToolTip="åœ¨çª—å£ä¸­æŸ¥æ‰¾æ–‡æœ¬å¹¶è¿”å›žåæ ‡" />
                                        <Button Content="å…¨å±è¯†åˆ«"
                                                Style="{DynamicResource SubtleButton}"
                                                Padding="12,4" FontSize="11" Margin="6,0,0,0"
                                                Click="TestOcrFull_Click"
                                                ToolTip="è¯†åˆ«æ•´ä¸ªçª—å£çš„æ–‡å­—" />
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <!-- æˆªå›¾ / æ¨¡æ¿ -->
                            <Border Grid.Row="2"
                                    Background="{DynamicResource AppSurfaceVariant}"
                                    CornerRadius="6" Padding="12" Margin="0,0,0,10">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <StackPanel Grid.Row="0" Orientation="Horizontal">
                                        <TextBlock Text="æˆªå›¾/æ¨¡æ¿" FontWeight="SemiBold"
                                                   FontSize="12" Foreground="{DynamicResource AppText}"
                                                   VerticalAlignment="Center" />
                                        <Button Content="ðŸ“· æˆªå›¾"
                                                Style="{DynamicResource AccentButton}"
                                                Padding="12,4" FontSize="11" Margin="12,0,0,0"
                                                Click="ScreenshotTool_Click"
                                                ToolTip="åœ¨ç›®æ ‡çª—å£ä¸Šæ¡†é€‰åŒºåŸŸï¼Œä¿å­˜åˆ°æ¨¡æ¿æ–‡ä»¶å¤¹ï¼ˆä¸Ž logs åŒçº§ï¼‰" />
                                    </StackPanel>
                                    <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,8,0,0">
                                        <TextBlock Text="æ¨¡æ¿:"
                                                   Foreground="{DynamicResource AppTextMuted}"
                                                   VerticalAlignment="Center" FontSize="11" />
                                        <ComboBox x:Name="TemplateListCombo" MinWidth="200" Margin="6,0,8,0"
                                                  FontSize="11" VerticalAlignment="Center"
                                                  ToolTip="é€‰æ‹©è¦åŒ¹é…çš„æ¨¡æ¿å›¾ç‰‡" />
                                        <Button Content="è¯†åˆ«"
                                                Style="{DynamicResource SubtleButton}"
                                                Padding="12,4" FontSize="11"
                                                Click="MatchTemplate_Click"
                                                ToolTip="ç”¨å½“å‰ç”»é¢ä¸Žæ‰€é€‰æ¨¡æ¿åŒ¹é…" />
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <!-- é”®ç›˜æµ‹è¯• -->
                            <Border Grid.Row="3"
                                    Background="{DynamicResource AppSurfaceVariant}"
                                    CornerRadius="6" Padding="12" Margin="0,0,0,10">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="æŒ‰é”®:"
                                               Foreground="{DynamicResource AppTextMuted}"
                                               VerticalAlignment="Center" FontSize="11" />
                                    <Border x:Name="KeyCaptureBorder"
                                            Background="{DynamicResource AppBackground}"
                                            BorderBrush="{DynamicResource AppBorderSubtle}"
                                            BorderThickness="1"
                                            CornerRadius="4" MinWidth="120" Margin="4,0,12,0"
                                            Padding="8,4"
                                            MouseLeftButtonDown="KeyCapture_MouseDown"
                                            Cursor="Hand"
                                            Focusable="True"
                                            KeyDown="KeyCapture_KeyDown"
                                            LostFocus="KeyCapture_LostFocus">
                                        <TextBlock x:Name="KeyCaptureText" Text="ç‚¹å‡»æ•èŽ·æŒ‰é”®"
                                                   Foreground="{DynamicResource AppTextMuted}"
                                                   FontSize="11" VerticalAlignment="Center" />
                                    </Border>
                                    <Button Content="å‘é€"
                                            Style="{DynamicResource AccentButton}"
                                            Padding="12,4" FontSize="11"
                                            Click="TestKeyPress_Click" />
                                </StackPanel>
                            </Border>

                            <!-- æµ‹è¯•æ—¥å¿— -->
                            <Border Grid.Row="4"
                                    Background="{DynamicResource AppBackground}"
                                    CornerRadius="6" Padding="10">
                                <ScrollViewer VerticalScrollBarVisibility="Auto">
                                    <TextBlock x:Name="InputTestLog"
                                               FontFamily="Cascadia Code,Consolas,monospace"
                                               Foreground="{DynamicResource AppTextMuted}"
                                               FontSize="10" TextWrapping="Wrap"
                                               Text="æµ‹è¯•æ—¥å¿—..." />
                                </ScrollViewer>
                            </Border>
                        </Grid>
                    </Border>
                </TabItem>
            </TabControl>
        </Grid>
    </Border>
</Window>
