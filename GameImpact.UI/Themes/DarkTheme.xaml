<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="Colors.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <!-- 暗色主题画刷 -->
    <SolidColorBrush x:Key="AppBackground" Color="{StaticResource Dark.Background}" />
    <SolidColorBrush x:Key="AppSurface" Color="{StaticResource Dark.Surface}" />
    <SolidColorBrush x:Key="AppSurfaceVariant" Color="{StaticResource Dark.SurfaceVariant}" />
    <SolidColorBrush x:Key="AppSurfaceHover" Color="{StaticResource Dark.SurfaceHover}" />
    <SolidColorBrush x:Key="AppBorder" Color="{StaticResource Dark.Border}" />
    <SolidColorBrush x:Key="AppBorderSubtle" Color="{StaticResource Dark.BorderSubtle}" />
    <SolidColorBrush x:Key="AppBorderHover" Color="{StaticResource Dark.BorderHover}" />
    <SolidColorBrush x:Key="AppText" Color="{StaticResource Dark.Text}" />
    <SolidColorBrush x:Key="AppTextSecondary" Color="{StaticResource Dark.TextSecondary}" />
    <SolidColorBrush x:Key="AppTextMuted" Color="{StaticResource Dark.TextMuted}" />
    <SolidColorBrush x:Key="AppAccent" Color="{StaticResource Dark.Accent}" />
    <SolidColorBrush x:Key="AppAccentHover" Color="{StaticResource Dark.AccentHover}" />
    <SolidColorBrush x:Key="AppAccentLight" Color="{StaticResource Dark.AccentLight}" />
    <SolidColorBrush x:Key="AppAccentDark" Color="{StaticResource Dark.AccentDark}" />
    <SolidColorBrush x:Key="AppSuccess" Color="{StaticResource Dark.Success}" />
    <SolidColorBrush x:Key="AppSuccessHover" Color="{StaticResource Dark.SuccessHover}" />
    <SolidColorBrush x:Key="AppWarning" Color="{StaticResource Dark.Warning}" />
    <SolidColorBrush x:Key="AppWarningHover" Color="{StaticResource Dark.WarningHover}" />
    <SolidColorBrush x:Key="AppError" Color="{StaticResource Dark.Error}" />
    <SolidColorBrush x:Key="AppErrorHover" Color="{StaticResource Dark.ErrorHover}" />

    <!-- 按钮样式 -->
    <Style x:Key="AccentButton" TargetType="Button">
        <Setter Property="Background" Value="{StaticResource AppAccent}" />
        <Setter Property="Foreground" Value="#0A0A0C" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Padding" Value="16,8" />
        <Setter Property="FontWeight" Value="Medium" />
        <Setter Property="Cursor" Value="Hand" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}"
                        CornerRadius="6"
                        Padding="{TemplateBinding Padding}">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="{StaticResource AppAccentHover}" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Opacity" Value="0.5" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="SubtleButton" TargetType="Button">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Foreground" Value="{StaticResource AppTextSecondary}" />
        <Setter Property="BorderBrush" Value="{StaticResource AppBorder}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Padding" Value="16,8" />
        <Setter Property="Cursor" Value="Hand" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="6"
                        Padding="{TemplateBinding Padding}">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="{StaticResource AppSurfaceVariant}" />
                <Setter Property="Foreground" Value="{StaticResource AppText}" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="IconButton" TargetType="Button">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Foreground" Value="{StaticResource AppTextSecondary}" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Padding" Value="8" />
        <Setter Property="Width" Value="36" />
        <Setter Property="Height" Value="36" />
        <Setter Property="Cursor" Value="Hand" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}"
                        CornerRadius="6"
                        Padding="{TemplateBinding Padding}">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="{StaticResource AppSurfaceVariant}" />
                <Setter Property="Foreground" Value="{StaticResource AppText}" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <!-- 窗口控制按钮 -->
    <Style x:Key="WindowButton" TargetType="Button">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Foreground" Value="{StaticResource AppTextSecondary}" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Width" Value="44" />
        <Setter Property="Height" Value="44" />
        <Setter Property="Cursor" Value="Hand" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="{StaticResource AppSurfaceVariant}" />
                <Setter Property="Foreground" Value="{StaticResource AppText}" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="WindowCloseButton" TargetType="Button" BasedOn="{StaticResource WindowButton}">
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="{StaticResource AppError}" />
                <Setter Property="Foreground" Value="#FFFFFF" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <!-- 输入框样式 -->
    <Style TargetType="TextBox">
        <Setter Property="Background" Value="{StaticResource AppBackground}" />
        <Setter Property="Foreground" Value="{StaticResource AppText}" />
        <Setter Property="BorderBrush" Value="{StaticResource AppBorder}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Padding" Value="6,4" />
        <Setter Property="MinWidth" Value="60" />
        <Setter Property="CaretBrush" Value="{StaticResource AppText}" />
        <Setter Property="SelectionBrush" Value="{StaticResource AppAccent}" />
        <Style.Triggers>
            <Trigger Property="IsFocused" Value="True">
                <Setter Property="BorderBrush" Value="{StaticResource AppAccent}" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <!-- ComboBox 样式 -->
    <Style TargetType="ComboBox">
        <Setter Property="Background" Value="{StaticResource AppSurface}" />
        <Setter Property="Foreground" Value="{StaticResource AppText}" />
        <Setter Property="BorderBrush" Value="{StaticResource AppBorder}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Padding" Value="10,6" />
        <Setter Property="MinWidth" Value="140" />
        <Setter Property="MinHeight" Value="30" />
        <Setter Property="HorizontalContentAlignment" Value="Left" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ComboBox">
                    <Grid SnapsToDevicePixels="True">
                        <Border x:Name="MainBorder"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="6"
                            Padding="{TemplateBinding Padding}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="20" />
                                </Grid.ColumnDefinitions>

                                <ContentPresenter Grid.Column="0"
                                    Margin="0"
                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                    Content="{TemplateBinding SelectionBoxItem}"
                                    ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                    ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                    IsHitTestVisible="False" />

                                <TextBlock Grid.Column="1"
                                    Text="▼"
                                    FontSize="10"
                                    Foreground="{StaticResource AppTextSecondary}"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    IsHitTestVisible="False" />
                            </Grid>
                        </Border>

                        <ToggleButton x:Name="PART_ToggleButton"
                            Background="Transparent"
                            BorderThickness="0"
                            Focusable="False"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            ClickMode="Press"
                            OverridesDefaultStyle="True"
                            IsChecked="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}">
                            <ToggleButton.Style>
                                <Style TargetType="ToggleButton">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="ToggleButton">
                                                <Border Background="Transparent"
                                                    BorderThickness="0">
                                                    <ContentPresenter HorizontalAlignment="Stretch"
                                                        VerticalAlignment="Stretch" />
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </ToggleButton.Style>
                        </ToggleButton>

                        <Popup x:Name="PART_Popup"
                            AllowsTransparency="True"
                            Focusable="False"
                            PopupAnimation="Slide"
                            Placement="Bottom"
                            PlacementTarget="{Binding RelativeSource={RelativeSource TemplatedParent}}"
                            IsOpen="{TemplateBinding IsDropDownOpen}">
                            <Border x:Name="DropDownBorder"
                                Margin="0,4,0,0"
                                MinWidth="{TemplateBinding ActualWidth}"
                                MaxHeight="{TemplateBinding MaxDropDownHeight}"
                                Background="{StaticResource AppSurface}"
                                BorderBrush="{StaticResource AppBorder}"
                                BorderThickness="1"
                                CornerRadius="6">
                                <ScrollViewer Margin="2"
                                    HorizontalScrollBarVisibility="Disabled"
                                    VerticalScrollBarVisibility="Auto"
                                    CanContentScroll="True">
                                    <ItemsPresenter
                                        KeyboardNavigation.DirectionalNavigation="Contained" />
                                </ScrollViewer>
                            </Border>
                        </Popup>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="MainBorder" Property="BorderBrush"
                                Value="{StaticResource AppAccent}" />
                        </Trigger>
                        <Trigger Property="IsKeyboardFocusWithin" Value="True">
                            <Setter TargetName="MainBorder" Property="BorderBrush"
                                Value="{StaticResource AppAccent}" />
                        </Trigger>
                        <Trigger Property="IsDropDownOpen" Value="True">
                            <Setter TargetName="MainBorder" Property="BorderBrush"
                                Value="{StaticResource AppAccent}" />
                        </Trigger>
                        <Trigger Property="HasItems" Value="False">
                            <Setter TargetName="DropDownBorder" Property="MinHeight" Value="40" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Opacity" Value="0.6" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ComboBoxItem 样式 -->
    <Style TargetType="ComboBoxItem">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Foreground" Value="{StaticResource AppText}" />
        <Setter Property="Padding" Value="10,6" />
        <Setter Property="Cursor" Value="Hand" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ComboBoxItem">
                    <Border x:Name="ItemBorder" Background="{TemplateBinding Background}"
                        Padding="{TemplateBinding Padding}" CornerRadius="3">
                        <ContentPresenter>
                            <ContentPresenter.Resources>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Foreground" Value="{StaticResource AppText}" />
                                </Style>
                            </ContentPresenter.Resources>
                        </ContentPresenter>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="ItemBorder" Property="Background"
                                Value="{StaticResource AppSurfaceVariant}" />
                        </Trigger>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter TargetName="ItemBorder" Property="Background"
                                Value="{StaticResource AppSurfaceVariant}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ToolTip 样式 -->
    <Style TargetType="ToolTip">
        <Setter Property="Background" Value="{StaticResource AppSurface}" />
        <Setter Property="Foreground" Value="{StaticResource AppText}" />
        <Setter Property="BorderBrush" Value="{StaticResource AppBorder}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Padding" Value="8,4" />
    </Style>

    <!-- Slider 样式 -->
    <Style TargetType="Slider">
        <Setter Property="Foreground" Value="{StaticResource AppAccent}" />
        <Setter Property="Background" Value="{StaticResource AppSurfaceVariant}" />
        <Setter Property="BorderBrush" Value="{StaticResource AppBorder}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Slider">
                    <Grid VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" MinHeight="{TemplateBinding MinHeight}" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <!-- 轨道背景 -->
                        <Border x:Name="TrackBackground" Grid.Row="1"
                            Height="4" CornerRadius="2"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="0"
                            VerticalAlignment="Center" />

                        <!-- 轨道 -->
                        <Track x:Name="PART_Track" Grid.Row="1">
                            <Track.DecreaseRepeatButton>
                                <RepeatButton Command="{x:Static Slider.DecreaseLarge}"
                                    Background="{TemplateBinding Foreground}">
                                    <RepeatButton.Template>
                                        <ControlTemplate TargetType="RepeatButton">
                                            <Border Height="4" CornerRadius="2"
                                                Background="{TemplateBinding Background}"
                                                VerticalAlignment="Center" />
                                        </ControlTemplate>
                                    </RepeatButton.Template>
                                </RepeatButton>
                            </Track.DecreaseRepeatButton>
                            <Track.IncreaseRepeatButton>
                                <RepeatButton Command="{x:Static Slider.IncreaseLarge}"
                                    Background="Transparent">
                                    <RepeatButton.Template>
                                        <ControlTemplate TargetType="RepeatButton">
                                            <Border Height="4"
                                                Background="{TemplateBinding Background}"
                                                VerticalAlignment="Center" />
                                        </ControlTemplate>
                                    </RepeatButton.Template>
                                </RepeatButton>
                            </Track.IncreaseRepeatButton>
                            <Track.Thumb>
                                <Thumb x:Name="Thumb" Width="18" Height="18"
                                    VerticalAlignment="Center">
                                    <Thumb.Template>
                                        <ControlTemplate TargetType="Thumb">
                                            <Border Background="{StaticResource AppAccent}"
                                                BorderBrush="{StaticResource AppAccent}"
                                                BorderThickness="0"
                                                CornerRadius="9"
                                                Width="{TemplateBinding Width}"
                                                Height="{TemplateBinding Height}">
                                                <VisualStateManager.VisualStateGroups>
                                                    <VisualStateGroup x:Name="CommonStates">
                                                        <VisualState x:Name="Normal" />
                                                        <VisualState x:Name="MouseOver">
                                                            <Storyboard>
                                                                <ColorAnimation
                                                                    Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                                    To="{StaticResource Dark.AccentLight}"
                                                                    Duration="0:0:0.1" />
                                                            </Storyboard>
                                                        </VisualState>
                                                        <VisualState x:Name="Pressed">
                                                            <Storyboard>
                                                                <ColorAnimation
                                                                    Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                                    To="{StaticResource Dark.AccentHover}"
                                                                    Duration="0:0:0.1" />
                                                            </Storyboard>
                                                        </VisualState>
                                                    </VisualStateGroup>
                                                </VisualStateManager.VisualStateGroups>
                                            </Border>
                                        </ControlTemplate>
                                    </Thumb.Template>
                                </Thumb>
                            </Track.Thumb>
                        </Track>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- CheckBox 样式 -->
    <Style TargetType="CheckBox">
        <Setter Property="Foreground" Value="{StaticResource AppText}" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="CheckBox">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="18" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Border x:Name="CheckBorder" Width="18" Height="18"
                            Background="{StaticResource AppSurface}"
                            BorderBrush="{StaticResource AppBorder}"
                            BorderThickness="1.5" CornerRadius="3"
                            VerticalAlignment="Center">
                            <Path x:Name="CheckMark" Data="M 3 8 L 7 12 L 14 4"
                                Stroke="{StaticResource AppAccent}" StrokeThickness="2"
                                Stretch="Uniform" Margin="2"
                                Visibility="Collapsed" />
                        </Border>
                        <ContentPresenter Grid.Column="1" Margin="8,0,0,0"
                            VerticalAlignment="Center"
                            RecognizesAccessKey="True" />
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter TargetName="CheckMark" Property="Visibility" Value="Visible" />
                            <Setter TargetName="CheckBorder" Property="BorderBrush"
                                Value="{StaticResource AppAccent}" />
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="CheckBorder" Property="BorderBrush"
                                Value="{StaticResource AppAccent}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>